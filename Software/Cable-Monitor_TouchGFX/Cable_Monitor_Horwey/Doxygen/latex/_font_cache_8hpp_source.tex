\doxysection{Font\+Cache.\+hpp}
\hypertarget{_font_cache_8hpp_source}{}\label{_font_cache_8hpp_source}\index{TouchGFX/generated/fonts/include/fonts/FontCache.hpp@{TouchGFX/generated/fonts/include/fonts/FontCache.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*\ DO\ NOT\ EDIT\ THIS\ FILE\ */}}
\DoxyCodeLine{00002\ \textcolor{comment}{/*\ This\ file\ is\ autogenerated\ by\ the\ text-\/database\ code\ generator\ */}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#ifndef\ TOUCHGFX\_FONTCACHE\_HPP}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#define\ TOUCHGFX\_FONTCACHE\_HPP}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{_font_8hpp}{touchgfx/Font.hpp}}>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{_typed_text_8hpp}{touchgfx/TypedText.hpp}}>}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <fonts/ApplicationFontProvider.hpp>}}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacetouchgfx}{touchgfx}}}
\DoxyCodeLine{00012\ \{}
\DoxyCodeLine{00013\ \textcolor{keyword}{class\ }CachedFont;}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtouchgfx_1_1_font_data_reader}{FontDataReader}}}
\DoxyCodeLine{00016\ \{}
\DoxyCodeLine{00017\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00018\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classtouchgfx_1_1_font_data_reader}{\string~FontDataReader}}()}
\DoxyCodeLine{00019\ \ \ \ \ \{}
\DoxyCodeLine{00020\ \ \ \ \ \}}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ open()\ =\ 0;}
\DoxyCodeLine{00023\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ close()\ =\ 0;}
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ setPosition(uint32\_t\ position)\ =\ 0;}
\DoxyCodeLine{00025\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ readData(\textcolor{keywordtype}{void}*\ out,\ uint32\_t\ numberOfBytes)\ =\ 0;}
\DoxyCodeLine{00026\ \};}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtouchgfx_1_1_font_cache}{FontCache}}}
\DoxyCodeLine{00029\ \{}
\DoxyCodeLine{00030\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00031\ \ \ \ \ \mbox{\hyperlink{classtouchgfx_1_1_font_cache}{FontCache}}();}
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{keywordtype}{void}\ setReader(\mbox{\hyperlink{classtouchgfx_1_1_font_data_reader}{FontDataReader}}*\ reader);}
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{keywordtype}{void}\ clear(\textcolor{keywordtype}{bool}\ keepGsubOrContextTable\ =\ \textcolor{keyword}{false});}
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{keywordtype}{void}\ setMemory(uint8\_t*\ memory,\ uint32\_t\ size);}
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keywordtype}{void}\ initializeCachedFont(\mbox{\hyperlink{classtouchgfx_1_1_typed_text}{TypedText}}\ t,\ \mbox{\hyperlink{classtouchgfx_1_1_cached_font}{CachedFont}}*\ font,\ \textcolor{keywordtype}{bool}\ loadGsubOrContextTable\ =\ \textcolor{keyword}{false});}
\DoxyCodeLine{00036\ \ \ \ \ \textcolor{keywordtype}{bool}\ cacheString(\mbox{\hyperlink{classtouchgfx_1_1_typed_text}{TypedText}}\ t,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classtouchgfx_1_1_unicode_aa7c1c36379dab89e697ea22fa4cd6b95}{Unicode::UnicodeChar}}*\ \textcolor{keywordtype}{string});}
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{keywordtype}{bool}\ cacheLigatures(\mbox{\hyperlink{classtouchgfx_1_1_cached_font}{CachedFont}}*\ font,\ \mbox{\hyperlink{classtouchgfx_1_1_typed_text}{TypedText}}\ t,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classtouchgfx_1_1_unicode_aa7c1c36379dab89e697ea22fa4cd6b95}{Unicode::UnicodeChar}}*\ \textcolor{keywordtype}{string});}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structtouchgfx_1_1_glyph_node}{GlyphNode}}*\ getGlyph(\mbox{\hyperlink{classtouchgfx_1_1_unicode_aa7c1c36379dab89e697ea22fa4cd6b95}{Unicode::UnicodeChar}}\ unicode,\ \mbox{\hyperlink{namespacetouchgfx_ab0e44c90ae4c1ef36dc2b940091825a2}{FontId}}\ font)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \ \ uint32\_t\ getMemoryUsage()}
\DoxyCodeLine{00042\ \ \ \ \ \{}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ memorySize\ -\/\ (gsubStart\ -\/\ top);}
\DoxyCodeLine{00044\ \ \ \ \ \}}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{keywordtype}{void}\ open();}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keywordtype}{void}\ close();}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keyword}{const}\ uint8\_t*\ getPixelData(\textcolor{keyword}{const}\ \mbox{\hyperlink{structtouchgfx_1_1_glyph_node}{GlyphNode}}*\ glyph)}
\DoxyCodeLine{00050\ \ \ \ \ \{}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ((\textcolor{keyword}{const}\ uint8\_t*)glyph)\ +\ SizeGlyphNode\ +\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{void}*);}
\DoxyCodeLine{00052\ \ \ \ \ \}}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ isCached(\textcolor{keyword}{const}\ \mbox{\hyperlink{structtouchgfx_1_1_glyph_node}{GlyphNode}}*\ g)}
\DoxyCodeLine{00055\ \ \ \ \ \{}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ g-\/>dataOffset\ ==\ 0xFFFFFFFF;}
\DoxyCodeLine{00057\ \ \ \ \ \}}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ uint32\_t\ SizeGlyphNode\ =\ 16;}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keywordtype}{bool}\ contains(\mbox{\hyperlink{classtouchgfx_1_1_unicode_aa7c1c36379dab89e697ea22fa4cd6b95}{Unicode::UnicodeChar}}\ unicode,\ \mbox{\hyperlink{namespacetouchgfx_ab0e44c90ae4c1ef36dc2b940091825a2}{FontId}}\ font)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{keywordtype}{void}\ insert(\mbox{\hyperlink{classtouchgfx_1_1_unicode_aa7c1c36379dab89e697ea22fa4cd6b95}{Unicode::UnicodeChar}}\ unicode,\ \mbox{\hyperlink{namespacetouchgfx_ab0e44c90ae4c1ef36dc2b940091825a2}{FontId}}\ font,\ \textcolor{keywordtype}{bool}\&\ outOfMemory);}
\DoxyCodeLine{00064\ \ \ \ \ uint8\_t*\ copyGlyph(uint8\_t*\ top,\ \mbox{\hyperlink{classtouchgfx_1_1_unicode_aa7c1c36379dab89e697ea22fa4cd6b95}{Unicode::UnicodeChar}}\ unicode,\ \mbox{\hyperlink{namespacetouchgfx_ab0e44c90ae4c1ef36dc2b940091825a2}{FontId}}\ font,\ \textcolor{keywordtype}{bool}\&\ outOfMemory);}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keywordtype}{void}\ cacheData(\mbox{\hyperlink{structtouchgfx_1_1_glyph_node}{GlyphNode}}*\ first);}
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keywordtype}{bool}\ cacheSortedString(\mbox{\hyperlink{classtouchgfx_1_1_typed_text}{TypedText}}\ t);}
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{keywordtype}{bool}\ createSortedString(\textcolor{keyword}{const}\ \mbox{\hyperlink{classtouchgfx_1_1_unicode_aa7c1c36379dab89e697ea22fa4cd6b95}{Unicode::UnicodeChar}}*\ \textcolor{keywordtype}{string});}
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keywordtype}{bool}\ createSortedLigatures(\mbox{\hyperlink{classtouchgfx_1_1_cached_font}{CachedFont}}*\ font,\ \mbox{\hyperlink{classtouchgfx_1_1_typed_text}{TypedText}}\ t,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classtouchgfx_1_1_unicode_aa7c1c36379dab89e697ea22fa4cd6b95}{Unicode::UnicodeChar}}*\ \textcolor{keywordtype}{string},\ ...);}
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{keywordtype}{bool}\ sortSortedString(\textcolor{keywordtype}{int}\ n);}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keywordtype}{void}\ setPosition(uint32\_t\ position);}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keywordtype}{void}\ readData(\textcolor{keywordtype}{void}*\ out,\ uint32\_t\ numberOfBytes);}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \ \ \ \ uint32\_t\ getGlyphSize(\textcolor{keyword}{const}\ \mbox{\hyperlink{structtouchgfx_1_1_glyph_node}{GlyphNode}}*\ gn)}
\DoxyCodeLine{00076\ \ \ \ \ \{}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (byteAlignRow)}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Round\ up\ line\ width\ to\ byte\ boundary\ and\ multiply\ by\ height}}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (gn-\/>width()\ *\ bpp\ +\ 7)\ /\ 8\ *\ gn-\/>height();}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Calculate\ number\ of\ pixels\ and\ round\ up\ to\ byte\ bounday}}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (gn-\/>width()\ *\ gn-\/>height()\ *\ bpp\ +\ 7)\ /\ 8;}
\DoxyCodeLine{00084\ \ \ \ \ \}}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \ \ \ \ \textcolor{keyword}{struct}}
\DoxyCodeLine{00087\ \ \ \ \ \{}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ uint8\_t*\ first;\ \textcolor{comment}{//\ First\ GlyphNode,\ glyph\ in\ cache;}}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ uint8\_t*\ last;\ \ \textcolor{comment}{//\ Last\ GlyphNode,\ glyph\ in\ cache;}}
\DoxyCodeLine{00090\ \ \ \ \ \}\ fontTable[MAX(TypographyFontIndex::NUMBER\_OF\_FONTS,\ 1)];}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \ \ \ \ uint32\_t\ memorySize;}
\DoxyCodeLine{00093\ \ \ \ \ uint8\_t*\ memory;\ \ \ \ \textcolor{comment}{//\ Start\ of\ memory}}
\DoxyCodeLine{00094\ \ \ \ \ uint8\_t*\ top;\ \ \ \ \ \ \ \textcolor{comment}{//\ First\ unused\ byte}}
\DoxyCodeLine{00095\ \ \ \ \ uint8\_t*\ gsubStart;\ \textcolor{comment}{//\ First\ address\ of\ GSUB\ tables,\ allocated\ in\ the\ end\ of\ the\ cache}}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \ \ \mbox{\hyperlink{classtouchgfx_1_1_font_data_reader}{FontDataReader}}*\ reader;}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \ \ \ \ \mbox{\hyperlink{classtouchgfx_1_1_unicode_aa7c1c36379dab89e697ea22fa4cd6b95}{Unicode::UnicodeChar}}*\ sortedString;}
\DoxyCodeLine{00100\ \ \ \ \ \textcolor{comment}{//\ Must\ be\ bigger\ than\ BinaryFontData}}
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ uint32\_t\ MAX\_BUFFER\_SIZE\ =\ 64;}
\DoxyCodeLine{00102\ \ \ \ \ \textcolor{keywordtype}{char}\ buffer[MAX\_BUFFER\_SIZE];}
\DoxyCodeLine{00103\ \ \ \ \ uint32\_t\ glyphDataOffset;}
\DoxyCodeLine{00104\ \ \ \ \ uint16\_t\ numGlyphs;}
\DoxyCodeLine{00105\ \ \ \ \ uint16\_t\ currentFileGlyphNumber;}
\DoxyCodeLine{00106\ \ \ \ \ uint8\_t\ bpp;}
\DoxyCodeLine{00107\ \ \ \ \ uint8\_t\ byteAlignRow;}
\DoxyCodeLine{00108\ \ \ \ \ \mbox{\hyperlink{structtouchgfx_1_1_glyph_node}{GlyphNode}}\ currentFileGlyphNode;}
\DoxyCodeLine{00109\ \};}
\DoxyCodeLine{00110\ \}\ \textcolor{comment}{//\ namespace\ touchgfx}}
\DoxyCodeLine{00111\ }
\DoxyCodeLine{00112\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ TOUCHGFX\_FONTCACHE\_HPP}}

\end{DoxyCode}
