<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cable-Monitor by Horvat &amp; Wey: Cable-Monitor Code Documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo2.png"/></td>
  <td id="projectalign">
   <div id="projectname">Cable-Monitor by Horvat &amp; Wey<span id="projectnumber">&#160;V1.0</span>
   </div>
   <div id="projectbrief">ZHAW ET.PM3</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Cable-Monitor Code Documentation </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This is the firmware for the <b>Electronics-Project Module</b> </p><h1><b>ET.PM3: Cable-Monitor</b> </h1>
<p><br  />
 As part of the Project Module 3 in the 5th Semester, the objective was to develop a Cable-Monitor. This device should be able to find hidden cables in walls, floors and ceilings by measuring the electromagnetic and electrostatic fields of the cable. By making use of the display from the provided development kit, the user is guided to the approximate location of the cable. In addition, audible feedback is provided using a buzzer and useful information such as the current and voltage, is shown on the display. To be able to measure such weak signals, an amplifier had to be used. The amplification was also paired with a Multi-Feedback-Bandpass-Filter (MFB) to eliminate unnecessary frequencies and filter out the wanted 50 Hz signal. Subsequently, the signal is fed into an Analog-to-Digital-Converter (ADC) and read by the microcontroller. The final product aims to detect various types of cables, including one- or two-phased cables and will feature an intuitive touch interface. The challenge extended beyond the realms of hardware and software to effective teamwork, as the project was a collaborative effort between two individuals. Successful completion required meticulous planning and coordination between team members.</p>
<p>This Software is to be used with the STM32F429I-Discovery Board in conjunction with the <a class="el" href="index.html#Cable-Monitor-Board">Cable-Monitor-Board</a> designed by A. Horvat and T. Wey. <br  />
 The Cable-Monitor Board acts as a shield which is connected to the STM32F429I-Discovery board using the headers on the back of the board. <br  />
 Its power source comes from its dedicated micro-USB port, which simultaneously powers the STM32F429I-Discovery board.</p>
<p><a class="anchor" id="Cable-Monitor-Board"></a><br  />
 The following renders show the front and back view of the cable monitor. </p><table class="doxtable">
<tr>
<td><div class="image">
<img src="Cable_Monitor_Front.png" alt="" height="400px"/>
<div class="caption">
Front View</div></div>
  </td><td><div class="image">
<img src="Cable_Monitor_Back.png" alt="" height="400px"/>
<div class="caption">
Back View</div></div>
   </td></tr>
</table>
<h2>Core Files </h2>
<p><br  />
 <a class="el" href="measuring_8c.html" title="Measuring input signal using the following configuration:">measuring.c</a> prepares the measured data. <br  />
 <a class="el" href="calculation_8c.html" title="Calculations for displaying the measurements.">calculation.c</a> performs the necessary calculations for displaying the measurements. <br  />
 <a class="el" href="_f_l_a_s_h___s_e_c_t_o_r___f4_8c.html" title="File for &#39;FLASH_SECTOR_F4&#39; functions.">FLASH_SECTOR_F4.c</a> is used to store the calibration values in the flash memory. <br  />
 <a class="el" href="main_8c.html" title=": Main program body">main.c</a> puts everything together.</p>
<h2>GUI Files </h2>
<p><br  />
 <a class="el" href="class_measurement___single___display__1_p_view.html">Measurement_Single_Display_1PView</a> is the main screen for the single phase measurement. <br  />
 <a class="el" href="class_measurement___single___display__3_p_view.html">Measurement_Single_Display_3PView</a> is the main screen for the three phase measurement. <br  />
 <a class="el" href="class_measurement___accurate___display__1_p_view.html">Measurement_Accurate_Display_1PView</a> is the main screen for the accurate measurement. <br  />
 <a class="el" href="class_measurement___accurate___display__3_p_view.html">Measurement_Accurate_Display_3PView</a> is the main screen for the accurate three phase measurement. <br  />
 <a class="el" href="class_calibration_view_base.html">CalibrationViewBase</a> is the main screen for the calibration. <br  />
 <a class="el" href="class_settings_view.html">SettingsView</a> is the main screen for the settings. <br  />
 <a class="el" href="class_main___menu_view_base.html">Main_MenuViewBase</a> is the main screen for the main menu.</p>
<h2>TouchGFX </h2>
<p><br  />
 In the src folder in generated/gui_generated, the code for all screen elements is generated. This was done using the TouchGFX Designer. <br  />
 In the src folder in gui, the virtual functions are implemented.</p>
<h2>How to use the Cable-Monitor </h2>
<p>This Firmware offers a comprehensive set of features for cable measurement. It allows you to determine the distance to a cable, measure the current flowing through it, and identify its frequency. Additionally, it provides user-friendly guidance through a visual gauge that displays the angle to the cable. In the measurement menu, users have the flexibility to choose between two modes: a single, quicker measurement that takes only about 5 periods of a 50Hz signal, or a more precise but slower accurate measurement, which requires approximately 50 periods for completion. For enhanced accuracy, the calibration menu enables users to fine-tune distance and current measurements. These calibration values are securely stored in the microcontroller's flash memory. In the main menu, located in the top left corner, users can access the settings menu to control the buzzer and LED functions. Furthermore, in the top right corner of the main menu, there is an option to power off the cable monitor. Additionally, the cable monitor can be turned on and off using its dedicated power button on the cable monitor board.</p>
<p>An information menu is also available to provide users with detailed information about the cable monitor's firmware version and its developers.</p>
<p><br  />
 The following figures show the different menus and their functions (Taken from <a class="el" href="index.html#Simulator">Simulator</a>). </p><table class="doxtable">
<tr>
<td><div class="image">
<img src="Measurement_Menu.png" alt="" height="320px"/>
<div class="caption">
Main Menu</div></div>
  </td><td><div class="image">
<img src="Settings_Menu.png" alt="" height="320px"/>
<div class="caption">
Settings Menu</div></div>
  </td><td><div class="image">
<img src="Project_info.png" alt="" height="320px"/>
<div class="caption">
Information Menu</div></div>
  </td><td><div class="image">
<img src="Measurement_Menu.png" alt="" height="320px"/>
<div class="caption">
Measurement Menu</div></div>
   </td></tr>
<tr>
<td><div class="image">
<img src="Single_Measurement_Menu.png" alt="" height="320px"/>
<div class="caption">
Single Measurement Menu</div></div>
  </td><td><div class="image">
<img src="Single_Measurement_1Phase.png" alt="" height="320px"/>
<div class="caption">
Single Measurement 1 Phase</div></div>
  </td><td><div class="image">
<img src="Calibration_Menu_Pad.png" alt="" height="320px"/>
<div class="caption">
Calibration Menu (PAD -&gt; Distance)</div></div>
  </td><td><div class="image">
<img src="Calibration_Menu_HS.png" alt="" height="320px"/>
<div class="caption">
Calibration Menu (Hall-Sensor -&gt; Current)</div></div>
   </td></tr>
</table>
<dl class="section note"><dt>Note</dt><dd>Not all menus are shown here. <br  />
 For example, the accurate measurement menu is not shown, as it is identical to the single measurement menu, except for the number of periods used for calculation. <br  />
 The 3-phase measurement menu is also not shown, as it is identical to the 1-phase measurement menu, except for the number of phases used for calculation. <br  />
 Additionally values are not shown as the renders where made using the TouchGFX Simulator.</dd></dl>
<p><a class="anchor" id="Simulator"></a></p><h2>Simulator </h2>
<p>Additionally the GUI can be simulated using the TouchGFX Simulator. <br  />
 
<a href="../Cable_Monitor_Simulator.zip">Download Cable_Monitor.exe</a>
 </p><dl class="section attention"><dt>Attention</dt><dd>The Simulator requires a Windows PC. In the simulation, values cannot be measured, and other functions, such as the auto turn-off feature, do not operate. <br  />
 It solely functions as a visual representation of the GUI.</dd></dl>
<h2>How to use this software package </h2>
<p><br  />
 To use this software package, the following steps are required: <br  />
 1. Download the software package from the Cable-Monitor-Repository. <br  />
 2. Open the project in TouchGFX Designer and generate the code. <br  />
 3. Open the project in STM32CubeIDE. <br  />
 4. Link the libs folder to the project. <br  />
 5. Clean and build the project. <br  />
 6. Connect the STM32F429I-Discovery board to the PC. <br  />
 7. Flash the project to the board.</p>
<dl class="section note"><dt>Note</dt><dd><br  />
 This software package is only compatible with the STM32F429I-Discovery board. <br  />
 STM32CubeIDE version 1.6.1 or higher is required to use this software package. <br  />
 TouchGFX Designer version 4.16.0 or higher is required to use this software package.</dd></dl>
<h2>Testing </h2>
<p><a class="el" href="testing.html">testing.html</a></p>
<h2>Known Bugs </h2>
<p><a class="el" href="bug.html">bug.html</a></p>
<hr  />
 <dl class="section author"><dt>Author</dt><dd>Alejandro Horvat, <a href="#" onclick="location.href='mai'+'lto:'+'hor'+'va'+'ale'+'@s'+'tud'+'en'+'ts.'+'zh'+'aw.'+'ch'; return false;">horva<span class="obfuscator">.nosp@m.</span>ale@<span class="obfuscator">.nosp@m.</span>stude<span class="obfuscator">.nosp@m.</span>nts.<span class="obfuscator">.nosp@m.</span>zhaw.<span class="obfuscator">.nosp@m.</span>ch</a> &amp; Timo Wey, <a href="#" onclick="location.href='mai'+'lto:'+'wey'+'ti'+'m01'+'@s'+'tud'+'en'+'ts.'+'zh'+'aw.'+'ch'; return false;">weyti<span class="obfuscator">.nosp@m.</span>m01@<span class="obfuscator">.nosp@m.</span>stude<span class="obfuscator">.nosp@m.</span>nts.<span class="obfuscator">.nosp@m.</span>zhaw.<span class="obfuscator">.nosp@m.</span>ch</a> </dd></dl>
<dl class="section date"><dt>Date</dt><dd>27.12.2023 </dd></dl>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
